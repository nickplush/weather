(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),o=n(17),i=n.n(o),s=(n(75),n(5)),u=n(22),l="[CITY] change",d=function(e){return{type:l,payload:e}},j="[MEANTIME] change",b="ERROR",f="JS_ERROR",h="API_ERROR",O=function(e){var t=e.name,n=e.data,a=e.level;console.log({name:t,data:n,level:a})},p=function(e){var t=e.name,n=e.data;O({name:t,data:n,level:b})},v="favorites",m=function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(a){p({name:f,data:a})}},y=function(e){var t;try{var n=localStorage.getItem(e);t=JSON.parse(n)}catch(a){p({name:f,data:a})}return t},x="[FAVORITES] add",w="[FAVORITES] get",g=Object(u.c)({window:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Home",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return t.payload;default:return e}},myLocation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return t.payload;default:return e}},favorite:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:case x:return t.payload;default:return e}}}),_=n(56),k=(n(82),n(123)),N=n(127),T=n(57),S=n.n(T),C={appId:"plGXJ2ZDUD0D",apiKey:"529c898360f48ea935b00c3ab5ee2060",type:"city"},D=function(){var e=Object(s.b)(),t=Object(r.useCallback)((function(t){var n=t.suggestion.latlng,a=n.lat,r=n.lng;e(d({latitude:a,longitude:r}))}),[]);return Object(a.jsx)(S.a,{placeholder:"Find city...",options:C,onChange:t})},E=n(13),I=n(122),J=n(128),M=function(){var e=Object(s.b)(),t=Object(r.useState)(""),n=Object(E.a)(t,2),c=n[0],o=n[1],i=Object(r.useCallback)((function(e,t){return o(t)}),[]),u=Object(r.useCallback)((function(){return e({type:j,payload:"Today"})}),[]),l=Object(r.useCallback)((function(){return e({type:j,payload:"Tomorrow"})}),[]),d=Object(r.useCallback)((function(){return e({type:j,payload:"Week"})}),[]);return Object(a.jsxs)(I.a,{value:c,onChange:i,showLabels:!0,children:[Object(a.jsx)(J.a,{label:"Today",onClick:u}),Object(a.jsx)(J.a,{label:"Tomorrow",onClick:l}),Object(a.jsx)(J.a,{label:"Week",onClick:d})]})},R=n(44),L=n.n(R),W=function(){return Object(a.jsx)("div",{className:L.a.root,children:Object(a.jsx)(N.a,{position:"static",children:Object(a.jsxs)(k.a,{className:L.a.toolbar,children:[Object(a.jsx)(M,{}),Object(a.jsx)(D,{})]})})})},F=n(63),A=n(6),B=n.n(A),G=n(9),H=n(124),P=n(61),U=n.n(P).a.create({baseURL:"https://api.openweathermap.org/data/2.5",params:{appId:"5dd71aff0b74d44817be6ac1785e9b46"}}),V=function(){var e=Object(G.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,t;case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),p({name:h,data:e.t0});case 10:return a=n.data,e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(G.a)(B.a.mark((function e(t){var n,a,r,c,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.latitude,a=void 0===n?"0":n,r=t.longitude,c=void 0===r?"0":r,e.next=3,V(U.get("/weather",{params:{lat:a,lon:c}}));case 3:return o=e.sent,e.abrupt("return",o||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(G.a)(B.a.mark((function e(t){var n,a,r,c,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.latitude,a=void 0===n?"0":n,r=t.longitude,c=void 0===r?"0":r,e.next=3,V(U.get("/onecall",{params:{lat:a,lon:c,exclude:"current,minutely,hourly,alerts"}}));case 3:return o=e.sent,e.abrupt("return",o||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(G.a)(B.a.mark((function e(t){var n,a,r,c,o,i,s,u=arguments;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:0,a=t.latitude,r=void 0===a?"0":a,c=t.longitude,o=void 0===c?"0":c,e.next=4,V(U.get("/forecast",{params:{lat:r,lon:o,exclude:"current,minutely,hourly,alerts"}}));case 4:return i=e.sent,s=[],i&&i.list&&(s=i.list.filter((function(e){var t=e.dt;return(new Date).getDay()+n===new Date(1e3*t).getDay()}))),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(e){return{dateTime:function(e){var t=new Date(1e3*e.dt).getHours();return"".concat(t,":00")}(e),temperature:function(e){var t=e.main.temp,n=Math.round(t-273.15);return"".concat(n," \u2103")}(e),weatherType:function(e){return e.weather[0].main}(e),windSpeed:function(e){var t=e.wind.speed;return"Wind - ".concat(t," per second")}(e),city:function(e){return"".concat(e.name,", ").concat(e.sys.country)}(e)}},Y=n(31),K=n.n(Y),Z=n(62),$=n.n(Z),ee=function(e){var t=e.favorites,n=e.myLocation,r=e.weather,c=e.saveCity,o=X(r),i=o.windSpeed,s=o.temperature,u=o.city,l=o.weatherType,d=!t.some((function(e){return t=n,a=e,JSON.stringify(a.coords)===JSON.stringify(t);var t,a}));return Object(a.jsx)("div",{children:Object(a.jsxs)(N.a,{border:1,className:K.a.root,children:[Object(a.jsx)("div",{className:K.a.container,children:Object(a.jsxs)("div",{className:K.a.card,children:[Object(a.jsx)(H.a,{variant:"h3",children:s}),Object(a.jsx)(H.a,{variant:"h4",children:u}),Object(a.jsxs)(H.a,{variant:"h6",children:[l," "]}),Object(a.jsx)(H.a,{variant:"h6",children:i})]})}),d&&Object(a.jsx)("div",{className:K.a.addBut,children:Object(a.jsx)($.a,{onClick:c,style:{fontSize:40}})})]})})},te=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.myLocation})),n=Object(s.c)((function(e){return e.favorite})),c=Object(r.useState)(""),o=Object(E.a)(c,2),i=o[0],u=o[1],l=function(){var e=Object(G.a)(B.a.mark((function e(){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,q(t);case 3:n=e.sent,u(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return l()}),[t]);return Object(a.jsx)(a.Fragment,{children:i?Object(a.jsx)(ee,{weather:i,favorites:n,myLocation:t,saveCity:function(){var a,r=function(e,t){return{city:e.name+","+e.sys.country,coords:{latitude:t.latitude,longitude:t.longitude}}}(i,t),c=[].concat(Object(F.a)(n),[r]);e((m(v,a=c),{type:x,payload:a}))}}):Object(a.jsx)(H.a,{variant:"h3",children:"Geolocation unspecified"})})},ne=["Sunday","Tuesday","Wednesday","Thursday","Friday","Saturday","Monday"],ae=function(e,t){return{dayTemperature:function(e){var t=e.temp.day,n=Math.round(t-273.15);return"".concat(n," \u2103")}(e),weatherType:function(e){return e.weather[0].main}(e),weekDay:function(e){var t=new Date(1e3*e.dt);return ne[t.getDay()]}(e)}},re=function(e){var t=e.classes,n=e.weatherItem,r=ae(n),c=r.weatherType,o=r.weekDay,i=r.dayTemperature;return Object(a.jsxs)(N.a,{border:1,className:t.card,children:[Object(a.jsx)(H.a,{component:"div",children:o}),Object(a.jsx)(H.a,{component:"div",children:i}),Object(a.jsx)(H.a,{component:"div",children:c})]})},ce=n(32),oe=n.n(ce),ie=["January","February","March","April","May","June","July","August","September","October","November","December"],se=["Today","Tomorrow"],ue=function(e){var t=new Date;t.setDate(t.getDate()+e);var n=t.getMonth(),a=ie[n],r=t.getDate();return"".concat(a,", ").concat(r)},le=function(){var e=Object(s.c)((function(e){return e.myLocation})),t=Object(r.useState)([]),n=Object(E.a)(t,2),c=n[0],o=n[1],i=Object(r.useCallback)(function(){var e=Object(G.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:n=e.sent,a=n.daily,o(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);Object(r.useEffect)((function(){return i(e)}),[e]);var u=ue(0),l=ue(8);return Object(a.jsx)("div",{className:oe.a.root,children:Object(a.jsxs)("div",{className:oe.a.container,children:[Object(a.jsx)("h2",{children:"Week"}),Object(a.jsxs)("h3",{children:[u," - ",l]}),Object(a.jsx)("div",{className:oe.a.root,children:c.map((function(e){return Object(a.jsx)(re,{classes:oe.a,weatherItem:e},Math.random())}))})]})})},de=function(e){var t=e.classes;return e.weather.map((function(e){var n=X(e),r=n.dateTime,c=n.temperature,o=n.weatherType,i=n.windSpeed;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:t.time,children:r}),Object(a.jsx)("td",{className:t.weather,children:c}),Object(a.jsx)("td",{className:t.weather,children:o}),Object(a.jsx)("td",{className:t.weather,children:i})]},r)}))},je=n(30),be=n(64),fe=function(e){var t=e.location,n=Object(s.c)((function(e){return e.myLocation})),c=Object(r.useState)(""),o=Object(E.a)(c,2),i=o[0],u=o[1],l=function(){var e=Object(G.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,q(n);case 3:t=e.sent,u(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(Object(r.useEffect)((function(){return l()}),[n]),i){var d=X(i),j=d.temperature,b=d.weatherType,f={properties:{balloonContent:"".concat(j,", ").concat(b)},modules:["geoObject.addon.balloon","geoObject.addon.hint"]};return function(e){return function(e){return[[e.latitude,e.longitude]]}(e).map((function(e){return Object(a.jsx)(je.b,Object(be.a)({geometry:e},f),Math.random())}))}(t)}return null},he=function(e){var t=e.location,n=e.classes;return Object(a.jsx)(N.a,{border:1,children:Object(a.jsx)(je.c,{children:Object(a.jsx)(je.a,{state:function(e){return{center:[e.latitude,e.longitude],zoom:8}}(t),className:n.map,children:Object(a.jsx)(fe,{location:t})})})})},Oe=n(33),pe=n.n(Oe),ve=function(e){var t=e.day,n=Object(s.c)((function(e){return e.myLocation})),c=Object(r.useState)([]),o=Object(E.a)(c,2),i=o[0],u=o[1],l=Object(r.useCallback)(function(){var e=Object(G.a)(B.a.mark((function e(t,n){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t,n);case 2:a=e.sent,u(a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]);Object(r.useEffect)((function(){l(n,t)}),[n,t]);var d=ue(t),j=function(e){return se[e]}(t);return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("div",{className:pe.a.container,children:[Object(a.jsx)(H.a,{variant:"h3",children:j}),Object(a.jsx)(H.a,{variant:"h5",children:d}),Object(a.jsxs)("table",{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:pe.a.time,children:"Time"}),Object(a.jsx)("td",{children:"Weather"})]})}),Object(a.jsx)("tbody",{children:Object(a.jsx)(de,{classes:pe.a,weather:i})})]})]}),Object(a.jsx)("div",{children:Object(a.jsx)(he,{location:n,classes:pe.a})})]})},me=n(125),ye=n(34),xe=n.n(ye),we=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.favorite})),n=Object(r.useCallback)((function(t){e(d(t))}),[]);return Object(a.jsxs)("div",{className:xe.a.main,children:[Object(a.jsx)("h2",{children:"Saved cities"}),Object(a.jsx)("div",{className:xe.a.root,children:Object(a.jsx)("div",{className:xe.a.container,children:Object(a.jsx)(me.a,{container:!0,spacing:10,children:t.map((function(e){var t=e.coords,r=e.city;return Object(a.jsx)(me.a,{item:!0,xs:2,children:Object(a.jsx)(N.a,{border:1,className:xe.a.card,onClick:function(){return n(t)},children:Object(a.jsx)(H.a,{component:"div",children:r})})},t.latitude)}))})})})]})},ge=function(){var e=Object(s.c)((function(e){return e.window}));return function(){switch(e){case"Home":return Object(a.jsx)(we,{});case"Today":return Object(a.jsx)(ve,{day:0});case"Tomorrow":return Object(a.jsx)(ve,{day:1});case"Week":return Object(a.jsx)(le,{});default:return Object(a.jsx)(we,{})}}()};var _e=function(){var e=Object(s.b)(),t=function(){navigator.geolocation.getCurrentPosition((function(t){var n={latitude:t.coords.latitude,longitude:t.coords.longitude};e(d(n))}),(function(e){console.error("Error Code = "+e.code+" - "+e.message)})),e(function(){var e=y(v)||[];return{type:w,payload:e}}())};return Object(r.useEffect)((function(){return t()}),[]),Object(a.jsxs)("div",{children:[Object(a.jsx)(W,{}),Object(a.jsx)(te,{}),Object(a.jsx)(ge,{})]})},ke=Object(u.d)(g,{},Object(u.a)(_.a));i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(s.a,{store:ke,children:Object(a.jsx)(_e,{})})}),document.getElementById("root"))},31:function(e,t,n){e.exports={root:"style_root__1bicT",container:"style_container__2BvEL",card:"style_card__10tqU",addBut:"style_addBut__1VpwE"}},32:function(e,t,n){e.exports={root:"style_root__3M-tg",container:"style_container__2wQGX",card:"style_card__gakWg"}},33:function(e,t,n){e.exports={day:"style_day__3ciBP",map:"style_map__3Sd9Q",time:"style_time__rtnN6",weather:"style_weather__1yEj1",container:"style_container__1qyWu"}},34:function(e,t,n){e.exports={card:"classes_card__1xn16",root:"classes_root__3A8EG",container:"classes_container__2BFrY",main:"classes_main__3f9Om"}},44:function(e,t,n){e.exports={root:"style_root__1W2rm",toolbar:"style_toolbar__2FJdD"}},75:function(e,t,n){},82:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.d6975001.chunk.js.map